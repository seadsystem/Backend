language: go
go:
  - tip
sudo: required
dist: trusty
addons:
  apt:
    packages:
    - python3
    - python3-coverage
    - libpq-dev
    - python3-numpy
    - python3-psycopg2
    - python3-matplotlib
install:
  - go get github.com/olt/libpq
  - go get github.com/DATA-DOG/go-sqlmock
  - go get github.com/axw/gocov/gocov
  - go get github.com/mattn/goveralls
  - go get golang.org/x/tools/cmd/cover
  - sudo -E apt-get -yq --no-install-suggests --no-install-recommends --force-yes install python3-pip
  - sudo easy_install3 psycopg2
before_script:
  - go vet $GOPATH/src/github.com/seadsystem/Backend/DB/landingzone/...
script:
  - cd $GOPATH/src/github.com/seadsystem/Backend/DB/landingzone; go install
  - cd $GOPATH/src/github.com/seadsystem/Backend/DB/api; ./test_url_parser.py
  - cd $GOPATH/src/github.com/seadsystem/Backend/DB/api; ./test_db.py
after_success:
  - cd $GOPATH/src/github.com/seadsystem/Backend; go test github.com/seadsystem/Backend/DB/landingzone/...
  - cd $GOPATH/src/github.com/seadsystem/Backend/DB/landingzone; ./test-coverage.sh
